<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="format-detection" content="telephone=no" />
  <title>that_be_in_fr</title>
  <meta name="description" content="from May 10 to June 5, 2018">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Hina+Mincho&display=swap" rel="stylesheet">
  <link href="./index.css" rel="stylesheet" />
  <link href="./modal.css" rel="stylesheet" />

  <!-- Mapbox -->
  <script src='https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.css' rel='stylesheet' />
  <link rel="icon" href="cover.jpg">
</head>

<body>
  <h1>
    <button>that_be_in_fr</button>
  </h1>

  <dialog id="modal">
    <section>
      <button type="button">×</button>
      <h2 id="title">that_be_in_fr</h2>
      <p>from May 10 to June 5, 2018</p>
    </section>
  </dialog>

  <main id="map"></main>

  <footer>
    <nav class="org radio">
      <b>カテゴリー</b>
      <input type="radio" name="tag" id="art" value="art">
      <label for="art">文化施設</label>
      <input type="radio" name="tag" id="tour" value="tour">
      <label for="tour">観光地</label>
      <input type="radio" name="tag" id="food" value="food">
      <label for="food">飲食</label>
      <input type="radio" name="tag" id="nature" value="nature">
      <label for="nature">自然</label>
      <input type="radio" name="tag" id="all" value="all" checked>
      <label for="all">すべて表示</label>
    </nav>
    <nav class="radio">
      <b>エリア</b>
      <input type="radio" name="area" id="paris" value="paris" onchange="area('2.3419', '48.85786', '11')">
      <label for="paris">
        <ruby>Paris <rt>パリ</rt></ruby>
      </label>
      <input type="radio" name="area" id="marseille" value="marseille" onchange="area('5.36486', '43.29999', '12')">
      <label for="marseille">
        <ruby>Marseille <rt>マルセイユ</rt></ruby>
      </label>
      <input type="radio" name="area" id="vaucluse" value="vaucluse" onchange="area('5.38322', '43.94313', '9.5')">
      <label for="vaucluse">
        <ruby>Sault, Saint-Saturnin-lès-Apt, Cucuron <rt>ヴォクリューズ</rt></ruby>
      </label>
      <input type="radio" name="area" id="provence" value="provence"
        onchange="area('6.401837490526702', '43.794157145680884', '9.5')">
      <label for="provence">
        <ruby>Castellane, Rougon and Lac de Sainte-Croix<rt>アルプ＝ド＝オート＝プロヴァンス</rt></ruby>
      </label>
      <input type="radio" name="area" id="maritimes" value="maritimes" onchange="area('7.07', '43.75', '10')">
      <label for="maritimes">
        <ruby>Coursegoules, Vence <rt>アルプ＝マリティーム</rt></ruby>
      </label>
      <input type="radio" name="area" id="nice" value="coursegoules"
        onchange="area('7.275017817776245', '43.69588804624814', '14')">
      <label for="nice">
        <ruby>Nice <rt>ニース</rt></ruby>
      </label>
    </nav>
  </footer>

  <script src="./mapbox.js"></script>
  <script src="./paris/index.js"></script>
  <script src="./provence/index.js"></script>
  <script>
    let targets = document.querySelectorAll(".marker");
    let filter = document.querySelectorAll(".org input");
    if (filter) {
      //****** for all select ******
      for (let i of filter) {
        i.addEventListener('change', () => {
          //*** for each target ***
          for (let ii of targets) {
            //*** delete hidden class ***
            ii.classList.remove('hidden');
            let value = i.value;
            let name = i.getAttribute('name');
            let item_data = ii.getAttribute('data-' + name);
            //*** set hidden class ***
            if (value && value !== 'all' && value !== item_data && !ii.classList.contains('hidden')) {
              ii.classList.add('hidden');
            };
          };
        });
      };
    };
  </script>
</body>

</html>